# observer パターン

## 目次

1. 目的
2. クラス図
3. 実現方法
4. 外部イテレータータの実装
5. 内部イテレータータの実装

## 目的

あるオブジェクトが状態を変えたときに、それに依存する全てのオブジェクトに自動的にそのことが知らされ、また、それらが更新されるように、オブジェクト間に 1 対多の依存関係を定義する

### 背景

1 つのシステムを、協調動作するクラスの集まりに分割する際の一般的な副作用は、関連するオブジェクト間で無矛盾性を保つことである。しかし、無矛盾にするためにクラスの結合度を高めるようなことはしたくない<br>
あるオブジェクトが変更された時に、それに関連するオブジェクトも自動で変更したいケースがよくある。例えば、スプレッドシートで棒グラフと折れ線グラフが作画されている時、元のデータを更新すると、棒グラフと折線グラムも更新される

## クラス図

## 実装方法

- 通知者を subject、観察者を observer とする。
- subject は複数の observer を持つ。その方法は subject が observer を subscribe することである

## 実装例

### 1. subject が変更された時、observer に通知するようにする

これだと observer が増えた時に、subject 側に observer に通知するメソッドを追加しなければならない

### 2. subject が observer の list を持つようにする

observe が共通のインターフェース(update)を持つことで、observer のサブクラスであれば、リストに登録するだけで全ての observer に通知することができる

## ライブラリで使用されている例
